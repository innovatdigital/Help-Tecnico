<%- include('../../partials/app/head', {title: "Equipamentos"}) %>

<body class="bg-gray-100">
  <%- include('../../partials/app/sidebar', {user: user}) %>

  <div class="lg:pl-70">
    <%- include('../../partials/app/nav', {title: "Equipamentos"}) %>

    <main class="py-5 fade-in">
      <div class="px-4 sm:px-6 lg:pl-12 mt-2 col-span-3">
        <div class="sm:flex sm:justify-between sm:items-center">
          <h1 class="text-lg font-semibold leading-6 text-gray-900 inter color-purple"><span class="text-blue"><%= equipments.length %> equipamento(s)</span> cadastrado(s)</h1>

          <div class="flex items-center space-x-2">
            <select class="text-blue inter font-medium text-sm pl-2 pr-6 py-1.5 border-blue-1 rounded-md">
              <option value="select">Empresa</option>
            </select>

            <div class="relative flex">
              <label for="search-field" class="sr-only">Search</label>
              <svg class="pointer-events-none absolute inset-y-0 left-0 h-full ml-2 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
              </svg>
              <input id="search-field" class="block h-full w-full border-blue-1 rounded-lg py-2 pl-8 pr-0 inter text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm" placeholder="Pesquisar por nome" type="search" name="search">
            </div>
          </div>
        </div>
        
        <div class="mt-8 flow-root">
          <div class="-mx-4 -my-2">
            <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-5">
              <% if (equipments.length > 0) { %>
                <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg">
                  <table class="min-w-full divide-y divide-gray-300">
                    <thead class="bg-gray-50">
                      <tr>
                        <th scope="col" class="py-3.5 pl-4.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 inter">Imagem</th>
                        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 inter">Modelo</th>
                        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 inter">Marca</th>
                        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 inter">Empresa</th>
                        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 inter">Status</th>
                        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 inter">BTUs</th>
                        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 inter">Data de cadastro</th>
                        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 inter">Ações</th>
                      </tr>
                    </thead>
  
                    <tbody class="divide-y divide-gray-200 bg-white">
                      <% equipments.forEach(function(item) { %>
                        <tr>
                          <td class="whitespace-nowrap inter py-4 text-sm inter text-gray-800 font-semibold">
                            <div class="flex items-center ml-5">
                              <% if (item.imageFile.length > 0) { %>
                                <img class="h-16 w-226 rounded-lg" src="/img/equipments/<%= item.imageFile %>">
                              <% } %>
                            </div>
                          </td>

                          <td class="whitespace-nowrap px-3 py-4 text-sm inter text-gray-800 font-semibold">
                            <%= item.model %>
                          </td>

                          <td class="whitespace-nowrap px-3 py-4 text-sm inter text-gray-800 font-semibold">
                            <%= item.brand %>
                          </td>

                          <td class="whitespace-nowrap px-3 py-4 text-sm inter text-gray-800 font-semibold">
                            <div class="flex items-center">
                              <% if (item.photoCompany.length > 0) { %>
                                <img class="h-9 w-9 rounded-full" src="/img/photos/<%= item.photoCompany %>">
                              <% } else { %>
                                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <g clip-path="url(#clip0_1_8)">
                                  <path d="M16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32Z" fill="#0EA5E9"/>
                                  <path d="M23.2614 11.6669C23.301 11.7456 23.3247 11.8314 23.3312 11.9195C23.3376 12.0076 23.3267 12.0961 23.2991 12.1798C23.2714 12.2636 23.2276 12.3409 23.1701 12.4073C23.1126 12.4737 23.0427 12.5278 22.9644 12.5665C22.886 12.6051 22.8009 12.6276 22.7139 12.6325C22.6269 12.6374 22.5398 12.6247 22.4577 12.5952C22.3756 12.5656 22.3002 12.5197 22.2358 12.4602C22.1714 12.4008 22.1193 12.3288 22.0826 12.2488C21.6895 11.4312 21.1358 10.7036 20.4553 10.1108C20.2389 9.9885 19.9946 9.9256 19.7468 9.92849C19.499 9.93134 19.2562 9.99981 19.0426 10.1272C18.829 10.2545 18.6519 10.4362 18.5289 10.6543C18.4059 10.8724 18.3413 11.1193 18.3416 11.3706V12.1024C18.3413 12.2534 18.2819 12.3982 18.1766 12.505C18.0712 12.6118 17.9284 12.6719 17.7794 12.6722H14.8444C14.6953 12.6719 14.5525 12.6118 14.4472 12.505C14.3418 12.3982 14.2825 12.2534 14.2822 12.1024V12.1864C14.2825 11.9063 14.2019 11.6322 14.0502 11.3982C14.0156 11.3541 13.9825 11.3089 13.9508 11.2626C13.8066 11.0882 13.6238 10.9509 13.4173 10.8618C13.2107 10.7727 12.9863 10.7345 12.7624 10.7501C12.5385 10.7658 12.3214 10.835 12.1289 10.952C11.9364 11.069 11.774 11.2305 11.6548 11.4233C11.5935 11.5628 11.4866 11.6767 11.3522 11.7457C11.2178 11.8147 11.0641 11.8347 10.9169 11.8023C10.7697 11.7699 10.638 11.6871 10.5439 11.5679C10.4498 11.4486 10.3991 11.3001 10.4003 11.1474V8.41208C10.4002 8.25713 10.4535 8.10699 10.551 7.98767C10.6485 7.86835 10.7841 7.7873 10.9343 7.75854C11.0845 7.72978 11.2399 7.75516 11.3737 7.83025C11.5074 7.9053 11.611 8.02541 11.6667 8.16972C11.7853 8.35562 11.9447 8.51128 12.1324 8.6246C12.3201 8.73791 12.531 8.80577 12.7488 8.82296C12.9666 8.84014 13.1854 8.80617 13.3881 8.72367C13.5908 8.64117 13.7721 8.51234 13.9177 8.3473C13.9678 8.27006 14.0219 8.19558 14.0798 8.12413L14.0881 8.11093H14.0916C14.3326 7.81737 14.6344 7.58122 14.9756 7.4193C15.3168 7.25732 15.689 7.1736 16.0657 7.17395H16.1012C16.124 7.17145 16.1469 7.17027 16.1698 7.17035C17.6492 7.16992 19.0988 7.59131 20.353 8.38644C21.6073 9.18157 22.6155 10.3184 23.2626 11.6669H23.2614ZM17.7735 14.2043C17.7732 14.0532 17.7138 13.9085 17.6085 13.8017C17.5031 13.6949 17.3603 13.6347 17.2114 13.6344H15.1817C15.0327 13.6351 14.8901 13.6953 14.7848 13.802C14.6795 13.9088 14.6201 14.0533 14.6195 14.2043V25.5355C14.6198 25.6866 14.6791 25.8314 14.7845 25.9382C14.8898 26.045 15.0326 26.1051 15.1817 26.1054H17.2114C17.3603 26.1051 17.5031 26.045 17.6085 25.9382C17.7138 25.8314 17.7732 25.6866 17.7735 25.5355V14.2043Z" fill="white"/>
                                  </g>
                                  <defs>
                                  <clipPath id="clip0_1_8">
                                  <rect width="32" height="32" fill="white"/>
                                  </clipPath>
                                  </defs>
                                </svg>
                              <% } %>                                  
                              <p class="inter ml-2"><%= item.nameCompany %></p>
                            </div>
                          </td>

                          <td class="whitespace-nowrap px-3 py-4 text-sm inter text-gray-800 font-semibold">
                            <% if (item.status == "normal") { %>
                              <span class="inline-flex items-center inter gap-x-1.5 border rounded-full px-2 py-1 text-xs font-semibold text-gray-900 ring-1 ring-inset ring-gray-200">
                                <svg width="6" height="6" viewBox="0 0 6 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <g clip-path="url(#clip0_285_50)">
                                  <path d="M3 6C4.65685 6 6 4.65685 6 3C6 1.34315 4.65685 0 3 0C1.34315 0 0 1.34315 0 3C0 4.65685 1.34315 6 3 6Z" fill="#11AA17"/>
                                  </g>
                                  <defs>
                                  <clipPath id="clip0_285_50">
                                  <rect width="6" height="6" fill="white"/>
                                  </clipPath>
                                  </defs>
                                </svg>                              
                                Funcionando corretamente
                              </span>
                            <% } else { %>
                              <span class="inline-flex items-center inter gap-x-1.5 border rounded-full px-2 py-1 text-xs font-semibold text-gray-900 ring-1 ring-inset ring-gray-200">
                                <svg width="6" height="6" viewBox="0 0 6 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <g clip-path="url(#clip0_285_50)">
                                  <path d="M3 6C4.65685 6 6 4.65685 6 3C6 1.34315 4.65685 0 3 0C1.34315 0 0 1.34315 0 3C0 4.65685 1.34315 6 3 6Z" fill="#e2c106"/>
                                  </g>
                                  <defs>
                                  <clipPath id="clip0_285_50">
                                  <rect width="6" height="6" fill="white"/>
                                  </clipPath>
                                  </defs>
                                </svg>                              
                                Em manutenção
                              </span>
                            <% } %>
                          </td>

                          <td class="whitespace-nowrap px-3 py-4 text-sm inter text-gray-800 font-semibold">
                            <%= item.btus %> BTUs
                          </td>

                          <td class="whitespace-nowrap px-3 py-4 text-sm inter text-gray-800 font-semibold">
                            <%= item.createdAtFormatted %>
                          </td>
  
                          <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 inter color-purple font-semibold">
                            <a href="/technician/view-equipment/<%= item._id %>" class="flex items-center pointer">
                              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-2">
                                <path opacity="0.5" d="M2.73038 12.7463C2.0221 11.8262 1.66797 11.3661 1.66797 9.99992C1.66797 8.63375 2.0221 8.17369 2.73038 7.25353C4.1446 5.41622 6.51639 3.33325 10.0013 3.33325C13.4862 3.33325 15.858 5.41622 17.2722 7.25353C17.9805 8.17369 18.3346 8.63375 18.3346 9.99992C18.3346 11.3661 17.9805 11.8262 17.2722 12.7463C15.858 14.5836 13.4862 16.6666 10.0013 16.6666C6.51639 16.6666 4.1446 14.5836 2.73038 12.7463Z" stroke="#0E1726" stroke-width="1.25"/>
                                <path d="M12.5 10C12.5 11.3807 11.3807 12.5 10 12.5C8.61925 12.5 7.5 11.3807 7.5 10C7.5 8.61925 8.61925 7.5 10 7.5C11.3807 7.5 12.5 8.61925 12.5 10Z" stroke="#0E1726" stroke-width="1.25"/>
                              </svg>
                              Visualizar                                  
                            </a>
                          </td>
                        </tr>
                      <% }) %>
                    </tbody>
                  </table>
                </div>
              <% } else { %>
                <div class="flex flex-col justify-center items-center mt-2 col-span-3 mt-52">
                </div>
              <% } %>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</body>
</html>